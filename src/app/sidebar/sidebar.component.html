<div class="sidebar-outer flex flex-column">
    <div class="move-up d-md-none" (click)="toggleMobileSidebar()">
        <i aria-hidden="true" id="up" class="fa fa-lg" [ngClass]="mobileSidebarVisible ? 'fa-chevron-down' : 'fa-chevron-up'"></i>
        <span class="up-text">Events List</span>
    </div>
    <div class="sidebar flex flex-column" [ngClass]="{'d-none d-md-flex': !mobileSidebarVisible}">
        <span *ngIf="this._viewService.isMapView(); else calendarView">
          <app-date-selector class="d-none d-md-block"></app-date-selector>
          <app-category-bar-map [showToggleButton]="true" class="d-none d-md-block"></app-category-bar-map>
        </span>
        <ng-template #calendarView>
          <app-search-bar></app-search-bar>
          <app-category-bar-calendar [showToggleButton]="true" class="d-none d-md-block"></app-category-bar-calendar>
        </ng-template>
        <div id="event-list" [ngClass]="mobileSidebarVisible ? 'event-list-show' : ''">
          <div *ngIf="filteredEvents.length == 0" id="no-events-section">
            <div><i id="no-events-icon" class="fa fa-calendar-times-o" aria-hidden="true"></i></div>
            <div id="no-events-label">No Events</div>
          </div>
            <div *ngFor="let event of filteredEvents" #eventList>
                <div class="sidebar-event"
                    [class.selected]="(clickedEvent && event.id == clickedEvent.id) || (hoveredEvent && event.id == hoveredEvent.id)"
                    (mouseenter)="onHover(event)"
                    (click)="onSelect(event)">
                    <div class="sidebar-event-img-container">
                        <img src="{{
                          event.properties.cover_picture == '<NONE>' ?
                            checkImage('/assets/images/banners/fb-banner-'+event.properties.categories[0].toLowerCase()+'.png') ?
                            '/assets/images/banners/fb-banner-'+event.properties.categories[0].toLowerCase()+'.png'
                            : '/assets/images/banners/fb-banner-default.png'
                          : event.properties.cover_picture
                        }}" class="sidebar-event-img">
                    </div>
                    <div class="sidebar-event-details">
                      <div>
                        <p class="sidebar-event-name">{{event.properties.name}}</p>
                        <p class="sidebar-event-date">{{_dateService.formatEventDate(event)}}</p>
                          <p class="sidebar-event-location" *ngIf="event.properties.place.name;else venue_street">
                            {{event.properties.place.name}}
                          </p>
                        <ng-template #venue_street>{{event.properties.place.location.street}}</ng-template>
                        <p class="sidebar-event-category" [innerHTML]="printCategories(event.properties.categories)"></p>
                      </div>
                    </div>
                    <!--ng-container #vc></ng-container>
                    <div class="event-add">
                          <a id="sidebar-event-add-button" data-toggle="dropdown" aria-haspopup="true" aria- expanded="true" (click)="showDialog()">+</a>
                  </div>
                  <ng-template #modal_1>
                      <modal id="modal_1" class="hhidden">
                          Dialog Header
                          <button (click)="closeDialog()">Close Dialog</button>
                      </modal>
                  </ng-template-->
                  <div class="event-add">
                          <a id="sidebar-event-add-button" data-toggle="dropdown" aria-haspopup="true" aria- expanded="true" (click)="openModal('custom-modal-1')">+</a>
                  </div>
                  <div>
                    <jw-modal id="custom-modal-1">
                    <div>
                      <h1 >Add to Calendar</h1>
                        <a class="dd-item" href="{{this._dateService.formatGoogleCalendar(event)}}"
                    target="_blank" title="Add to Google Calendar" rel="nofollow">Google Calendar</a>
                    
                        <a class="dd-item" (click)= "createICS(event)" [href]="fileUrl" download="{{event.properties.name}}.ics">Apple Calendar</a>
                    </div>
    <button (click)="closeModal('custom-modal-1');">Close</button>
</jw-modal>
                  </div>
                <div class="separator"></div>
            </div>
        </div>
    </div>
</div>

<!--

-->